name: CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  # Build all apps by calling the reusable workflow
  build-dev-cache:
    name: Build dev-cache
    uses: ./.github/workflows/build-app.yml
    with:
      app_name: dev-cache
      go_version: '1.22'

  build-git-cleaner:
    name: Build git-cleaner
    uses: ./.github/workflows/build-app.yml
    with:
      app_name: git-cleaner
      go_version: '1.22'

  build-mac-cache-cleaner:
    name: Build mac-cache-cleaner
    uses: ./.github/workflows/build-app.yml
    with:
      app_name: mac-cache-cleaner
      go_version: '1.22'
